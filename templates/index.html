{% extends "layout.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2 class="mb-0">{{ year }}年 {{ month }}月</h2>
        <p class="text-muted">ルーチンの概要</p>
    </div>
    <div class="btn-group shadow-sm" role="group">
        {% set prev_month = month - 1 %}
        {% set prev_year = year %}
        {% if prev_month < 1 %}
            {% set prev_month = 12 %}
            {% set prev_year = year - 1 %}
        {% endif %}
        
        {% set next_month = month + 1 %}
        {% set next_year = year %}
        {% if next_month > 12 %}
            {% set next_month = 1 %}
            {% set next_year = year + 1 %}
        {% endif %}
        
        <a href="{{ url_for('index', year=prev_year, month=prev_month) }}" class="btn btn-light border"><i class="bi bi-chevron-left"></i></a>
        <a href="{{ url_for('index', year=next_year, month=next_month) }}" class="btn btn-light border"><i class="bi bi-chevron-right"></i></a>
    </div>
</div>

<div class="calendar-header">
    <div onclick="showDayRoutines(0)" style="cursor: pointer;" title="月曜日のルーチンを確認">月</div>
    <div onclick="showDayRoutines(1)" style="cursor: pointer;" title="火曜日のルーチンを確認">火</div>
    <div onclick="showDayRoutines(2)" style="cursor: pointer;" title="水曜日のルーチンを確認">水</div>
    <div onclick="showDayRoutines(3)" style="cursor: pointer;" title="木曜日のルーチンを確認">木</div>
    <div onclick="showDayRoutines(4)" style="cursor: pointer;" title="金曜日のルーチンを確認">金</div>
    <div onclick="showDayRoutines(5)" style="cursor: pointer;" title="土曜日のルーチンを確認">土</div>
    <div onclick="showDayRoutines(6)" style="cursor: pointer;" title="日曜日のルーチンを確認" class="text-danger">日</div>
</div>

{% include 'calendar_partial.html' %}

<div class="d-flex justify-content-end mb-3">
    <button id="addSampleDataButton" class="btn btn-secondary btn-sm">サンプルデータ追加 (明日・明後日)</button>
</div>

<!-- Day Routine Modal -->
<div class="modal fade" id="dayRoutineModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="dayRoutineModalLabel">曜日別ルーチン</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="dayRoutineModalBody">
        <div class="text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
